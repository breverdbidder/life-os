name: Insert Tax Deed Data to Supabase
on:
  workflow_dispatch:
jobs:
  insert:
    runs-on: ubuntu-latest
    steps:
      - name: Insert Data
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
        run: |
          curl -X POST "$SUPABASE_URL/rest/v1/insights" \
            -H "apikey: $SUPABASE_KEY" \
            -H "Authorization: Bearer $SUPABASE_KEY" \
            -H "Content-Type: application/json" \
            -d '{
              "category": "taxdeed_auction",
              "content": "Dec 18, 2025 Tax Deed - 21 props | BID:15 REVIEW:1 SKIP:4",
              "metadata": {
                "auction_date": "12/18/2025",
                "total_properties": 21,
                "total_opening_bids": 183994.47,
                "total_market_value": 1618710,
                "github_data": "https://github.com/breverdbidder/brevard-bidder-scraper/blob/main/data/taxdeed/dec18_2025.json"
              }
            }' && echo "âœ… Saved"
